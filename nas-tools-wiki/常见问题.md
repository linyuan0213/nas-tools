---
title: 常见问题
description: 
published: 1
date: 2023-06-28T05:11:48.294Z
tags: 
editor: markdown
dateCreated: 2023-05-12T04:26:30.172Z
---

## <font color=#1786D0>无法启动</font>

- 启动日志报inotify instance limit reached、inotify watch limit reached等与`inotify`相关错误，参考`目录同步不自动运行`。
- docker环境下如本地网络`无法连接github`，则会长时间停留在启动界面，可将自动更新开关`NASTOOL_AUTO_UPDATE`设置为`false`。
- 如本地境像较旧，启动时检测到最新代码需要增加新依赖时会自动偿试安装，如果`依赖安装失败`则会无法启动，需要根据日志提升拉取最新镜像，并重置/重建容器。

<br>

## <font color=#1786D0>无法识别媒体信息</font>

- `TMDB API Key`必须设置，否则所有跟媒体信息相关的内容均无法正常运行。
- 无法正常连接TMDB网络时将无法识别媒体信息，可偿试更换 `设置->基础设置->媒体->TMDB API Url`，选择可正常连接的TMDB地址，其中`nastool.workers.dev`每日有10万次请求的限额，尽量不要选用。
- 修改系统hosts文件，使`api.themoviedb.org`或`api.tmdb.org`指定可访问的IP地址，可使用`自定义hosts插件`完成，同时`TMDB API Url`为这两个地址之一。
- 在`设置->基础设置->系统->代理服务器`中填写代理服务器。
- 让NAStool接入本地科学上网网络。

<br>

## <font color=#1786D0>提示网络中断</font>

- 如使用`反向代理`通过域名访问NAStool，请检查反向代理的`超时时间`，超时时间过短会导致连接被异常中断，需设置为`600秒`以上。

<br>

## <font color=#1786D0>目录同步不自动运行</font>

-  启动日志报与`inotify`相关的错误时，在宿主机上（不是docker容器里）执行以下命令，并重启宿主机：
```shell
echo fs.inotify.max_user_watches=5242880 | sudo tee -a /etc/sysctl.conf
echo fs.inotify.max_user_instances=5242880 | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
```
- 挂载`网盘`、`Windows向Linux的SMB共享`、`NFS共享`等不支持事件触发的目录实时监控，可改为使用`下载器监控`，或者打开目录同步的`兼容模式`（兼容模式下性能较低，可能会频繁读取磁盘）。
- 目录同步的源目录和目的目录或媒体库目录`不能存在嵌套关系`，此时日志中会有提示。
- `插件->定时目录同步`，使用定时执行全量同步命令的方式同步目录（不推荐）。

<br>


## <font color=#1786D0>添加下载失败</font>

- 需要添加的下载任务在下载器中`已经存在`。
- 该站点为`首次下载`种子，需要使用浏览器登录站点，点击下载种子按钮，在弹出的提示页面中选中`不再提示`，并确定提交，后续自动下载时将不会有这个问题。
- 检查种子链接是否能在浏览器中打开，因站点原因导致`种子链接失效`会无法下载。
- 检查是否设置`默认下载器`，在`设置->下载器`中点亮下载器卡片右上角的星星。

<br>

## <font color=#1786D0>通知消息无法点击跳转</font>
- `设置->基础设置->系统->外网访问地址`填写可外网访问的域名地址。

<br>

## <font color=#1786D0>刷流任务功能消失</font>

- 正确维护站点信息，并开启站点的`数据统计`选项，刷新一次数据，重新登录。
- 如果你没有任何一个PT站入站时间超过`1个月`，则无法使用刷流功能（避免萌新在未了解PT规则的情况下刷爆）。

<br>

## <font color=#1786D0>站点无法连通</font>

- 报错：`无法打开网站`，在浏览器中打开网址，确认是否可正常连接，如网站压力较大或者正在维护，偶尔无法连接是正常的，多试几次。如站点正常且反复偿试仍无法解决，`重启路由、光猫`。
- 报错：`Cookie失效`，检查和更换Cookie，另外如果站点关门了跳转到了非站点的页面也会导致这个提示。
- 报错：`错误码 403、502等`，一般是无法通过Cloudflare墙导致，在站点维护中更换`站点Cookie`和`User-Agent`。

> 注意：`站点Cookie`和`User-Agent`需要同步更换，可以大大提高过Cloudflare墙的成功率。
{.is-warning}

<br>

## <font color=#1786D0>文件转移报错: cross-device</font>

- `不同的磁盘`下的文件是不能硬链接的，文件转移的源目录和目的目录需要在同一磁盘上。
- 在docker中`不同的映射目录`会被系统层认为是跨盘，无法相互硬链接，在配置容器时应直接将源目录和目的目录的`上级目录`映射到容器内。
- 在群晖中，`不同的存储空间`被认为是跨盘，相同存储空间的`不同的共享文件夹`也被认为是跨盘。

