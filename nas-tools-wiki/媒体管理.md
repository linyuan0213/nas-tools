---
title: 媒体管理
description: 
published: 1
date: 2023-05-13T06:22:00.478Z
tags: 
editor: markdown
dateCreated: 2023-05-12T04:45:12.703Z
---

# 文件管理

手动管理文件系统中的资源，进行整理、硬链接查询及刮削。

## 手动转移

- 选择文件下面的`转移`按钮转移当前文件，选择右上角`转移`按钮转移当前目录所有文件。
- 手动转移操作参考：[手动识别](/媒体管理#手动识别)。

## 查询硬链接

- 选择文件下面的`硬链接查询`按钮，查询当前文件在文件系统中有哪些硬链接，选择右上角`硬链接`按钮查询当前目录下所有文件的所有硬链接。
- 查询硬链接需要指定`查询目录范围`，范围越大查询越慢。
- 硬链接查询结果界面可以对硬链接文件进行`删除`操作。


## 目录刮削

- 选择文件下面的`刮削`按钮刮削当前文件，选择右上角`刮削`按钮刮削当前目录所有文件。
- 刮削将会覆盖已存在的nfo及图片文件。

# 手动识别

查询未识别记录并进行手动管理，如出现大批量的正常命名文件无法识别，请优先检查TMDB网络连接。自动下场景下极少出现无法识别的情况。

## 重新识别

- 选择`重新识别`可以对未识别记录重新识别一次，有时因为网络连接不稳定的原因导致识别失败的，通过重新识别重新处理。

## 手动识别

选择`手动识别`通过指定TMDB媒体信息以及指定命名格式的方式执行文件整理。

- **类型**：根据当前文件的类型选择对应的类型，如为电视剧文件名中需要有集数，`动漫`只指动漫剧集，动漫命名格式必须选择此项。
- **TMDB ID**：点击`查询`按钮，输入`名称`查询TMDB媒体信息并选择，也可直接输入TMDBID。
- **最小文件大小**：`留空`将使用基础设置中的转移最小文件大小设置，如不限制大小需输入`0`。
- **集数指定**：通过指定集数和Part解决无法从文件名中识别出集数和Part的情况。`指定集数`、`指定Part`都不填，用默认识别。
  **指定具体集数**：例如 `1`表示第一集, `1-2`表示第1-2集(1,2合起来当作一集)，此选项优先级最高。
  **指定Part**: 需符合以下正则写法`(PART[0-9ABCI]{0,2}|^CD[0-9]{0,2}|^DVD[0-9]{0,2}|^DISK[0-9]{0,2}|^DISC[0-9]{0,2})`，例如`Part1`, `PartC`, `PartIII`, `Cd1`, `Dvd2`, `Disk10`, `Disc12`。
  
- **高级集数定位**：`{ep}定位集数`、`起始集,终止集`、`集数偏移`都不填，用默认识别。
  **标定集数位置**：使用`{ep}`标字集数位置，例如：`(BD)十二国記 第45話「東の海神 西の滄海 五章」(1440x1080 x264-10bpp flac).mkv`、`(BD)十二国記 第32話「風の万里 黎明の空　九章」(1440x1080 x264-10bpp flac).mkv`，此处可以填`(BD)十二国記 第{ep}話{a}(1440x1080 x264-10bpp flac).mkv` `{ep}`表示集，`{a}`表示随意用一个变量来替代不需要的但又不一致的部分，如果除了集数外没有其余不一样的内容，则只标定`{ep}`就行。
  **起始集,终止集**：裁定处理集数过滤范围，例如`2,4`只取第2集到第4集。
  **集数偏移**：例如`{ep}`定位出集数是11, 实际是第1集, 此处填`-10`, 以应付多季合集的场景。

# 历史记录

文件整理记录，追踪文件转移关系，并可对文件进行管理。

## 重新识别

- 对于识别出错的进行`重新识别`（比如调整了[自定义识别词](/自定义识别词)），识别后会产生新的转移记录，需要手工删除原转移记录（选择`删除媒体库文件`）。

## 手动识别

- 指定TMDB媒体信息以及指定命名格式的方式进行重新识别，操作参考[手动识别](/媒体管理#手动识别)，识别后会产生新的转移记录，需要手工删除原转移记录（选择`删除媒体库文件`）。

## 删除记录及文件

- **删除源文件**：删除转移记录的同时，会删除`原文件`。
- **删除媒体库文件**：删除转移记录的同时，会删除`转移后的文件`。
- **删除源文件及媒体库文件**：删除转移记录的同时，会删除`原文件`及`转移后的文件`。

# TMDB缓存

这里记录了所有TMDB的缓存数据，在进行媒体识别时将优先使得缓存数据，以减少对themoviedb的访问，同时也加快识别过程。

- 如themoviedb修改了媒体名称，可将对应的记录`删除`，以便重新查询themoviedb使用新的名称。
- `清空`将删除所有缓存数据，强制从themoviedb重新获取，非特别殊情不建议频繁清空TMDB缓存。
- 建议打开[TMDB缓存过期策略](/基础设置#实验室)，避免占用多过内存。
